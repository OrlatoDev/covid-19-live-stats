(()=>{var e;fetch("https://ipapi.co/json/").then((e=>e.json())).then((t=>{var o=t.country_name;document.getElementById("in-country").innerHTML=o,fetch("https://covid-193.p.rapidapi.com/statistics?country="+o,{method:"GET",headers:{"x-rapidapi-key":"*","x-rapidapi-host":"covid-193.p.rapidapi.com"}}).then((e=>e.json())).then((t=>{document.getElementById("country").innerHTML=o,document.getElementById("recovered").innerHTML=t.response[0].cases.recovered.toLocaleString(),document.getElementById("deaths").innerHTML=t.response[0].deaths.total.toLocaleString(),document.getElementById("confirmed").innerHTML=t.response[0].cases.total.toLocaleString(),document.getElementById("active").innerHTML=t.response[0].cases.active.toLocaleString(),function(t,o,a,n,r){e&&e.destroy();var d=document.getElementById("chart").getContext("2d");e=new Chart(d,{type:"bar",data:{datasets:[{label:"Confirmed",data:o,fill:!1,borderColor:"#197816",backgroundColor:"#197816",borderWidth:1},{label:"Active",data:a,fill:!1,borderColor:"#18cc12",backgroundColor:"#18cc12",borderWidth:1},{label:"Deaths",data:n,fill:!1,borderColor:"#eb1212",backgroundColor:"#eb1212",borderWidth:1},{label:"Recovered",data:r,fill:!1,borderColor:"#3363F7",backgroundColor:"#3363F7",borderWidth:1}],labels:["Covid-19 in "+t]},options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{ticks:{callback:e=>e.toLocaleString()}}]}}})}(o,[t.response[0].cases.total],[t.response[0].cases.active],[t.response[0].deaths.total],[t.response[0].cases.recovered])}))})),mapboxgl.accessToken="*";var t=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/dark-v10",zoom:1.5,center:[0,20]});function o(e,t,o){var a=e-t-o;return a>=2e6?"#530000":a>=1e6?"#a70000":a>=1e5?"#ff0000":a>=5e4?"#ff5252":a>=1e4?"#ff7b7b":a>=1e3?"#ffbaba":a<1e3?"#ffcdd2":a<=100?"#ffebee":a<=0?"white":void 0}fetch("https://corona-api.com/countries",{method:"GET",redirect:"follow"}).then((e=>e.json())).then((e=>{e.data.forEach((e=>{var a=e.coordinates.longitude,n=e.coordinates.latitude,r=e.latest_data.confirmed,d=e.latest_data.deaths,c=e.latest_data.recovered;new mapboxgl.Marker({color:o(r,d,c)}).setLngLat([a,n]).addTo(t)}))})),fetch("https://corona-api.com/timeline",{method:"GET",redirect:"follow"}).then((e=>e.json())).then((e=>{var t=e.data[0].confirmed,o=e.data[0].deaths,a=e.data[0].recovered,n=e.data[0].active;document.getElementById("confirmed-global").innerHTML=t.toLocaleString(),document.getElementById("deaths-global").innerHTML=o.toLocaleString(),document.getElementById("recovered-global").innerHTML=a.toLocaleString(),document.getElementById("active-global").innerHTML=n.toLocaleString()}))})();