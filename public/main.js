(()=>{var e,t,o;function n(t){document.getElementById("in-country").innerHTML=t,document.getElementById("country-footer").innerHTML=t,fetch("https://covid-193.p.rapidapi.com/statistics?country="+t,{method:"GET",headers:{"x-rapidapi-key":process.env.key_api_statistics_country,"x-rapidapi-host":"covid-193.p.rapidapi.com"}}).then((e=>e.json())).then((t=>{try{document.getElementById("recovered").innerHTML=t.response[0].cases.recovered.toLocaleString()}catch{document.getElementById("recovered").innerHTML="Without data"}try{document.getElementById("deaths").innerHTML=t.response[0].deaths.total.toLocaleString()}catch{document.getElementById("deaths").innerHTML="Without data"}try{document.getElementById("confirmed").innerHTML=t.response[0].cases.total.toLocaleString()}catch{document.getElementById("confirmed").innerHTML="Without data"}try{document.getElementById("active").innerHTML=t.response[0].cases.active.toLocaleString()}catch{document.getElementById("active").innerHTML="Without data"}!function(e,t,n,a,c){o&&o.destroy();var r=document.getElementById("chart").getContext("2d");o=new Chart(r,{type:"bar",data:{datasets:[{label:"Confirmed",data:t,fill:!1,borderColor:"#197816",backgroundColor:"#197816",borderWidth:1},{label:"Active",data:n,fill:!1,borderColor:"#18cc12",backgroundColor:"#18cc12",borderWidth:1},{label:"Deaths",data:a,fill:!1,borderColor:"#eb1212",backgroundColor:"#eb1212",borderWidth:1},{label:"Recovered",data:c,fill:!1,borderColor:"#3363F7",backgroundColor:"#3363F7",borderWidth:1}],labels:["Covid-19 in "+e]},options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{ticks:{callback:e=>e.toLocaleString()}}]}}})}(e,[t.response[0].cases.total],[t.response[0].cases.active],[t.response[0].deaths.total],[t.response[0].cases.recovered])}))}fetch("https://ipapi.co/json/").then((e=>e.json())).then((t=>{n(e=t.country_name)})),fetch("https://covid-193.p.rapidapi.com/statistics",{method:"GET",headers:{"x-rapidapi-key":process.env.key_api_statistics,"x-rapidapi-host":"covid-193.p.rapidapi.com"}}).then((e=>e.json())).then((o=>{countries=[],o.response.forEach((e=>{countries.push(e.country)})),t=document.getElementById("country");var n=0;countries.sort(),countries.forEach((o=>{if(o==e)(a=document.createElement("option")).value=o,a.text=o,a.selected=!0,a.className="opt",t.add(a,t[n]);else if("All"==o);else{var a;(a=document.createElement("option")).value=o,a.text=o,a.className="opt",t.add(a,t[n])}n++}))})),mapboxgl.accessToken=process.env.mapbox_token;var a=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/dark-v10",zoom:1.5,center:[0,20]});function c(e,t,o){var n=e-t-o;return n>=2e6?"#530000":n>=1e6?"#a70000":n>=1e5?"#ff0000":n>=5e4?"#ff5252":n>=1e4?"#ff7b7b":n>=1e3?"#ffbaba":n<1e3?"#ffcdd2":n<=100?"#ffebee":n<=0?"white":void 0}fetch("https://corona-api.com/countries",{method:"GET",redirect:"follow"}).then((e=>e.json())).then((e=>{e.data.forEach((e=>{var t=e.coordinates.longitude,o=e.coordinates.latitude,n=e.latest_data.confirmed,r=e.latest_data.deaths,d=e.latest_data.recovered;new mapboxgl.Marker({color:c(n,r,d)}).setLngLat([t,o]).addTo(a)}))})),fetch("https://corona-api.com/timeline",{method:"GET",redirect:"follow"}).then((e=>e.json())).then((e=>{var t=e.data[0].confirmed,o=e.data[0].deaths,n=e.data[0].recovered,a=e.data[0].active;document.getElementById("confirmed-global").innerHTML=t.toLocaleString(),document.getElementById("deaths-global").innerHTML=o.toLocaleString(),document.getElementById("recovered-global").innerHTML=n.toLocaleString(),document.getElementById("active-global").innerHTML=a.toLocaleString()})),document.getElementById("country").onchange=()=>{document.getElementById("recovered").innerHTML="Loading",document.getElementById("deaths").innerHTML="Loading",document.getElementById("confirmed").innerHTML="Loading",document.getElementById("active").innerHTML="Loading",n(document.getElementById("country").options[document.getElementById("country").selectedIndex].value)},document.getElementById("notf").onclick=()=>{var e,t;Notification.requestPermission(),"granted"==Notification.permission&&(e={opt:{body:"Covid-19 in "+locate,icon:"./icon.png"},title:"Covid-19",link:"https://covid19-live-stats.web.app/"},t=new Notification(e.title,e.opt),""!==opcoes.link&&t.addEventListener("click",(function(){t.close(),window.focus(),window.location.href=e.link})))}})();